name = "codetype-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[durable_objects]
bindings = [
  { name = "ROOMS", class_name = "GameRoom" }
]

[[migrations]]
tag = "v1"
new_sqlite_classes = ["GameRoom"]

[vars]
# Optional: CORS allowlist (comma-separated), e.g. "https://codetype.ai,https://www.codetype.ai"
# ALLOWED_ORIGINS = "https://codetype.ai"
# Optional: rate limit per minute per IP
# RATE_LIMIT_PER_MINUTE = "120"

# Required secrets (set via GitHub Actions or wrangler secret put):
# FIREBASE_CONFIG - JSON string containing full Firebase config:
#   {"projectId":"...","apiKey":"...","authDomain":"...","appId":"...","serviceAccount":{"client_email":"...","private_key":"..."}}
# FIREBASE_JWT_CERTS - JSON map of key ID to PEM certificate for token verification

[observability]
enabled = true

[observability.logs]
enabled = true
